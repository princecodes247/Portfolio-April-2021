import*as THREE from"./three.module.min.js";let introInDom=document.querySelector("#intro-sect div.bg"),camera,scene,renderer,starGeometry,starMaterial,stars,mouseY=100,mouseX=100;function mouseAnimateParticles(ev){mouseY=ev.clientY,mouseX=ev.clientX}function init(){camera=new THREE.PerspectiveCamera(60,window.innerHeight/window.innerWidth,1,1e3),camera.position.z=1,camera.rotation.x=Math.PI/2,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),scene=new THREE.Scene,starGeometry=new THREE.Geometry;for(let i=0;i<6e3;i++){let star=new THREE.Vector3(THREE.MathUtils.randFloatSpread(600),THREE.MathUtils.randFloatSpread(600),THREE.MathUtils.randFloatSpread(600));star.velocity=0,star.acceleration=.02,star.boost=.6,starGeometry.vertices.push(star)}let sprite=(new THREE.TextureLoader).load("star.png");starMaterial=new THREE.PointsMaterial({color:13421772,size:.7,map:sprite}),stars=new THREE.Points(starGeometry,starMaterial),stars.displacementY=0,stars.displacementZ=0,stars.displacementZLimit=0,scene.add(stars),renderer=new THREE.WebGLRenderer,renderer.setClearColor("#000000"),renderer.setSize(window.innerWidth,window.innerHeight),introInDom.appendChild(renderer.domElement),window.addEventListener("resize",()=>{renderer.setSize(window.innerWidth,window.innerHeight),camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix()})}function animate(){starGeometry.vertices.forEach(p=>{let boost=p.boost>0?p.boost:0;p.velocity+=p.acceleration+boost,p.y-=p.velocity,p.boost-=.002,p.y<-300&&pointReset(p)}),stars.rotation.y+=sineWave(stars),starGeometry.verticesNeedUpdate=!0,requestAnimationFrame(animate),renderer.render(scene,camera)}function sineWave(target,z=!1,amplitude=.009,frequency=360){if(z){let y=amplitude*Math.sin(target.displacementZ/frequency);return target.displacementZ+=1,y}let y=amplitude*Math.sin(target.displacementY/frequency);return target.displacementY+=1,y}function pointReset(point){point.y=100*Math.random()+170,point.z=600*Math.random()-300,point.x=600*Math.random()-300,point.velocity=0}document.addEventListener("mousemove",mouseAnimateParticles);export{init,animate};